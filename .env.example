# ==============================================================================
# ANTIGRAVITY MANAGER - ENVIRONMENT VARIABLES
# ==============================================================================
# HƯỚNG DẪN:
# 1. Copy file này thành .env:
#    cp .env.example .env
#
# 2. Điền đầy đủ thông tin bên dưới (đặc biệt là S3 credentials)
#
# 3. KHÔNG COMMIT file .env vào git (đã có trong .gitignore)
# ==============================================================================

# ==============================================================================
# ANTIGRAVITY MANAGER SETTINGS
# ==============================================================================

# Port để truy cập web UI trên host machine
# Ví dụ: http://localhost:8045
ANTIGRAVITY_MANAGER_HOST_PORT=8045

# Password để đăng nhập web UI (QUAN TRỌNG: đổi password mạnh)
# Yêu cầu: ít nhất 8 ký tự, nên có chữ hoa, chữ thường, số, ký tự đặc biệt
ANTIGRAVITY_MANAGER_WEB_PASSWORD=changeme_strong_password_here

# ==============================================================================
# RCLONE SYNC SETTINGS
# ==============================================================================

# Tên remote trong rclone config (mặc định: supabase)
# Không cần thay đổi trừ khi bạn muốn dùng tên khác
ANTIGRAVITY_MANAGER_REMOTE=supabase

# Đường dẫn trên S3 bucket (cấu trúc: bucket_name/path/to/data)
# Ví dụ: my-bucket/antigravity/state/production
# LƯU Ý: Không có dấu / ở đầu, có thể có / ở cuối hoặc không
ANTIGRAVITY_MANAGER_REMOTE_PATH=your-bucket-name/antigravity/state/prod

# Khoảng thời gian sync UP (từ container lên S3) - đơn vị: giây
# Ví dụ:
#   30  = sync mỗi 30 giây (realtime cao, tốn bandwidth)
#   60  = sync mỗi 1 phút (khuyến nghị cho dev/test)
#   300 = sync mỗi 5 phút (khuyến nghị cho production)
#   600 = sync mỗi 10 phút (ít thay đổi)
ANTIGRAVITY_MANAGER_SYNC_INTERVAL_SECONDS=60

# Số lần retry cho mỗi lần sync nếu gặp lỗi mạng/S3 tạm thời
ANTIGRAVITY_MANAGER_SYNC_MAX_RETRIES=5

# Thời gian chờ giữa các lần retry (giây)
ANTIGRAVITY_MANAGER_SYNC_RETRY_DELAY_SECONDS=5

# ==============================================================================
# SUPABASE S3 CREDENTIALS
# ==============================================================================
# LẤY THÔNG TIN TẠI:
# 1. Vào Supabase Dashboard → Project Settings → Storage
# 2. Tìm mục "S3 Connection" hoặc "S3 Access"
# 3. Generate hoặc copy Access Key ID và Secret Access Key
#
# CẢNH BÁO BẢO MẬT:
# - S3 keys bypass Row Level Security (RLS) policies
# - Có quyền truy cập TOÀN BỘ storage bucket
# - KHÔNG CHIA SẺ keys này với người khác
# - KHÔNG COMMIT vào git repository
# - Nên rotate (đổi) keys định kỳ (mỗi 3-6 tháng)
# ==============================================================================

# S3 Endpoint URL
# Format: https://[project-ref].supabase.co/storage/v1/s3
# Ví dụ: https://abcdefghijklmn.supabase.co/storage/v1/s3
ANTIGRAVITY_MANAGER_S3_ENDPOINT=https://your-project-ref.supabase.co/storage/v1/s3

# S3 Region (thường là "auto" hoặc region cụ thể như "ap-southeast-1")
# Để "auto" nếu không chắc chắn
ANTIGRAVITY_MANAGER_S3_REGION=auto

# S3 Access Key ID (dạng: project-ref_[random-string])
# Ví dụ: abcdefghijklmn_a1b2c3d4e5f6
ANTIGRAVITY_MANAGER_S3_ACCESS_KEY_ID=your-access-key-id-here

# S3 Secret Access Key (chuỗi base64 dài)
# Ví dụ: abc123def456ghi789...
ANTIGRAVITY_MANAGER_S3_SECRET_ACCESS_KEY=your-secret-access-key-here

# ==============================================================================
# RCLONE ADVANCED SETTINGS (TÙY CHỌN)
# ==============================================================================

# Rclone log level
# Các giá trị: ERROR, NOTICE, INFO, DEBUG
# - ERROR: chỉ hiện lỗi (production)
# - NOTICE: thông báo quan trọng (khuyến nghị)
# - INFO: chi tiết hơn (debugging)
# - DEBUG: rất chi tiết (troubleshooting)
ANTIGRAVITY_MANAGER_RCLONE_LOG_LEVEL=INFO

# Extra flags cho rclone (để mở rộng tương lai)
# Ví dụ: --bwlimit=1M (giới hạn bandwidth 1MB/s)
# Để trống nếu không cần
ANTIGRAVITY_MANAGER_RCLONE_EXTRA_FLAGS=

# ==============================================================================
# NOTES & BEST PRACTICES
# ==============================================================================
#
# 1. BACKUP DỮ LIỆU:
#    - Dữ liệu được lưu trong Docker volume "antigravity_data"
#    - Để backup: docker run --rm -v antigravity_data:/data -v $(pwd):/backup \
#                  alpine tar czf /backup/antigravity-backup.tar.gz /data
#
# 2. RESTORE DỮ LIỆU:
#    - docker run --rm -v antigravity_data:/data -v $(pwd):/backup \
#      alpine tar xzf /backup/antigravity-backup.tar.gz -C /
#
# 3. XEM DỮ LIỆU TRONG VOLUME:
#    - docker compose exec rclone-sync ls -la /data/.antigravity_tools
#
# 4. KIỂM TRA RCLONE CONFIG:
#    - docker compose exec rclone-sync rclone config show
#
# 5. SYNC THỦ CÔNG (nếu cần):
#    - docker compose exec rclone-sync rclone sync /data/.antigravity_tools \
#      supabase:your-bucket/path -v
#
# 6. BẢO MẬT:
#    - Thêm .env vào .gitignore
#    - Không screenshot hoặc share .env file
#    - Sử dụng secrets manager (Docker secrets, Vault) cho production
#    - Rotate S3 keys định kỳ
#
# ==============================================================================
